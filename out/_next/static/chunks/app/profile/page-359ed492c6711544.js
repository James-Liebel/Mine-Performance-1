(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{3277:function(e,t,r){Promise.resolve().then(r.bind(r,112))},112:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var a=r(7437),s=r(605),i=r(7648),n=r(2265),l=r(443);function o(e){let{waiver:t,signedAt:r,memberName:s,onSign:i}=e,n=!!r;return(0,a.jsxs)("div",{className:"profile-waiver-item card card-elevated",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"1rem",marginBottom:"0.5rem"},children:[(0,a.jsx)("h4",{style:{margin:0,fontSize:"1rem",fontWeight:600},children:t.title}),(0,a.jsx)("span",{className:"profile-waiver-status ".concat(n?"profile-waiver-status--signed":"profile-waiver-status--unsigned"),children:n?"Signed":"Unsigned"})]}),(0,a.jsxs)("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:1.5},children:[t.body,n&&r&&(0,a.jsxs)(a.Fragment,{children:[" ","E-signed on ",function(e){try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}catch(t){return e}}(r),s&&" on behalf of ".concat(s,".")]})]}),(0,a.jsx)("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:n?(0,a.jsxs)("button",{type:"button",className:"profile-waiver-download","aria-label":"Download waiver",children:[(0,a.jsx)("span",{"aria-hidden":!0,children:"↓"})," Download"]}):(0,a.jsx)("button",{type:"button",className:"btn btn-primary",style:{fontSize:"0.85rem"},onClick:()=>i(t.id),children:"Sign waiver"})})]})}function c(){var e,t;let{data:r}=(0,s.useSession)(),c=null==r?void 0:r.user,d=(null==c?void 0:c.role)==="admin",[m,h]=(0,n.useState)("James"),[u,p]=(0,n.useState)("Liebel"),[f,g]=(0,n.useState)(null!==(e=null==c?void 0:c.email)&&void 0!==e?e:"jamesliebel40@gmail.com"),[y,x]=(0,n.useState)("(513) 965-1578"),[b,v]=(0,n.useState)(""),[j,N]=(0,n.useState)("athlete"),[S,w]=(0,n.useState)([{id:"self",name:"James Liebel",phone:"(513) 965-1578"},{id:"2",name:"Jeff Liebel",phone:"(513) 555-0001"}]),[k,C]=(0,n.useState)(""),[D,z]=(0,n.useState)({googleCalendar:!1,alerts:!0,reminders:!0,promos:!0,email:!0,sms:!0}),[A,E]=(0,n.useState)([]),[P,T]=(0,n.useState)({}),[_,R]=(0,n.useState)(null),[W,F]=(0,n.useState)([]);(0,n.useEffect)(()=>{fetch("/api/member/me").then(e=>e.ok?e.json():null).then(e=>{if(e){var t;R(null!==(t=e.credits)&&void 0!==t?t:null),F(Array.isArray(e.creditHistory)?e.creditHistory:[])}else R(null),F([])}).catch(()=>{R(null),F([])})},[]),(0,n.useEffect)(()=>{fetch("/api/waivers").then(e=>e.json()).then(e=>E(Array.isArray(e)?e:[])).catch(()=>E([]))},[]),(0,n.useEffect)(()=>{fetch("/api/waivers/signatures").then(e=>e.json()).then(e=>T("object"==typeof e&&null!==e?e:{})).catch(()=>T({}))},[]);let L=e=>{fetch("/api/waivers/signatures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({waiverId:e})}).then(e=>e.ok&&e.json()).then(()=>{fetch("/api/waivers/signatures").then(e=>e.json()).then(e=>T("object"==typeof e&&null!==e?e:{}))})},O="".concat(m," ").concat(u).trim()||(null!==(t=null==c?void 0:c.name)&&void 0!==t?t:""),H=e=>{z(t=>({...t,[e]:!t[e]}))},Y=e=>{"self"!==e&&w(t=>t.filter(t=>t.id!==e))};if(!c)return null;let B=e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},I={stripe_purchase:"Stripe purchase",stripe_refund:"Refund",booking_spend:"Event booking",admin_adjustment:"Admin adjustment",membership_grant:"Membership",other:"Other"};return(0,a.jsxs)("div",{className:"container profile-overview",style:{paddingTop:"1.5rem",paddingBottom:"3rem",maxWidth:"720px"},children:[(0,a.jsxs)("section",{id:"credits",className:"card card-elevated profile-section profile-section--credits-highlight",children:[(0,a.jsx)(l.Y,{balance:_}),W.length>0&&(0,a.jsxs)("div",{className:"credits-history",style:{marginTop:"1.25rem",paddingTop:"1rem",borderTop:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{margin:"0 0 0.75rem",fontSize:"1rem",fontWeight:600},children:"Recent activity"}),(0,a.jsx)("ul",{className:"credits-history-list",style:{listStyle:"none",padding:0,margin:0},children:W.slice(0,15).map(e=>{var t;return(0,a.jsxs)("li",{className:"credits-history-item",children:[(0,a.jsxs)("span",{className:"credits-history-reason",children:[null!==(t=I[e.reason])&&void 0!==t?t:e.reason,e.reference&&(0,a.jsxs)("span",{className:"credits-history-ref",children:[" \xb7 ",e.reference.length>14?"".concat(e.reference.slice(0,12),"…"):e.reference]})]}),(0,a.jsxs)("span",{className:e.amount>=0?"credits-history-add":"credits-history-deduct",children:[e.amount>=0?"+":"",e.amount]}),(0,a.jsx)("span",{className:"credits-history-date",children:B(e.createdAt)})]},e.id)})})]})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section",children:[(0,a.jsx)("h2",{style:{margin:"0 0 1rem",fontSize:"1.15rem"},children:"Personal information"}),(0,a.jsxs)("div",{className:"profile-picture-row",children:[(0,a.jsx)("div",{className:"profile-picture-placeholder","aria-hidden":!0,children:(0,a.jsx)("span",{style:{opacity:.5},children:"\uD83D\uDC64"})}),(0,a.jsxs)("div",{className:"profile-picture-field form-group",style:{flex:1},children:[(0,a.jsx)("label",{className:"form-label",children:"Profile picture"}),(0,a.jsx)("input",{type:"text",className:"form-input",placeholder:"Upload here...",readOnly:!0,style:{background:"var(--surface)"}})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-birthday",children:"Birthday"}),(0,a.jsx)("input",{id:"profile-birthday",type:"text",className:"form-input",placeholder:"mm/dd/yyyy",value:b,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{className:"profile-form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-first",children:"First name"}),(0,a.jsx)("input",{id:"profile-first",type:"text",className:"form-input",value:m,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-last",children:"Last name"}),(0,a.jsx)("input",{id:"profile-last",type:"text",className:"form-input",value:u,onChange:e=>p(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-email",children:"Email"}),(0,a.jsx)("input",{id:"profile-email",type:"email",className:"form-input",value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-phone",children:"Phone"}),(0,a.jsx)("input",{id:"profile-phone",type:"tel",className:"form-input",value:y,onChange:e=>x(e.target.value)})]})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section",children:[(0,a.jsx)("h2",{style:{margin:"0 0 0.5rem",fontSize:"1.15rem"},children:"Add family members"}),(0,a.jsx)("p",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:1.5},children:"Add family members as linked users to checkout and sign up for events on behalf of other users. This is also applicable for memberships and team registration."}),(0,a.jsx)("ul",{className:"profile-family-list",style:{listStyle:"none",padding:0,margin:"0 0 1rem"},children:S.map(e=>(0,a.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,a.jsx)("span",{"aria-hidden":!0,style:{color:"var(--text-muted)"},children:"\uD83D\uDD17"}),(0,a.jsx)("span",{children:e.name}),e.phone&&(0,a.jsx)("span",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:e.phone}),"self"!==e.id&&(0,a.jsx)("button",{type:"button",className:"btn btn-secondary profile-remove-btn",onClick:()=>Y(e.id),style:{marginLeft:"auto",fontSize:"0.85rem",padding:"0.35rem 0.6rem"},children:"Remove"})]},e.id))}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=k.trim().replace(/\D/g,"");if(!t||t.length<10)return;let r=10===t.length?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6)):k.trim();w(e=>[...e,{id:"new-".concat(Date.now()),name:"Member ".concat(r),phone:r}]),C("")},className:"profile-add-family-form",style:{display:"flex",gap:"0.5rem",flexWrap:"wrap",alignItems:"flex-end"},children:[(0,a.jsxs)("div",{className:"form-group",style:{marginBottom:0,minWidth:"200px"},children:[(0,a.jsx)("label",{className:"form-label",htmlFor:"profile-new-member-phone",children:"Phone number"}),(0,a.jsx)("input",{id:"profile-new-member-phone",type:"tel",className:"form-input",placeholder:"(513) 555-1234",value:k,onChange:e=>C(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary profile-add-family",children:"+ Add by phone"})]})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section",children:[(0,a.jsx)("h2",{style:{margin:"0 0 0.5rem",fontSize:"1.15rem"},children:"Change user type"}),(0,a.jsx)("p",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"var(--text-muted)",lineHeight:1.5},children:"Are you a parent or an athlete? Please set this to what you are and use the linked user feature to act on behalf of other users."}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("select",{className:"form-input",value:j,onChange:e=>N(e.target.value),style:{maxWidth:"200px"},children:[(0,a.jsx)("option",{value:"athlete",children:"Athlete"}),(0,a.jsx)("option",{value:"parent",children:"Parent"})]})})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section",children:[(0,a.jsx)("h2",{style:{margin:"0 0 1rem",fontSize:"1.15rem"},children:"Notifications"}),[{key:"googleCalendar",label:"Google Calendar",desc:"Sync your events with Google Calendar. This will only work for events at facilities who have enabled the Google Calendar integration."},{key:"alerts",label:"Alerts",desc:"Important notifications and admin updates."},{key:"reminders",label:"Reminders",desc:"Reminders for scheduled events and payments."},{key:"promos",label:"Promos",desc:"Receive exclusive offers from our partner companies."},{key:"email",label:"Email",desc:"Receive your admin updates via email."},{key:"sms",label:"SMS",desc:"Do you agree to receive text messages from Mine Performance Academy. Message frequency varies. Reply STOP to unsubscribe."}].map(e=>{let{key:t,label:r,desc:s}=e;return(0,a.jsxs)("div",{className:"profile-notification-row",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{margin:0,fontWeight:600,fontSize:"0.95rem"},children:r}),(0,a.jsx)("p",{style:{margin:"0.25rem 0 0",fontSize:"0.85rem",color:"var(--text-muted)",lineHeight:1.4},children:s})]}),(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":D[t],className:"profile-toggle".concat(D[t]?" profile-toggle--on":""),onClick:()=>H(t),"aria-label":"".concat(r,": ").concat(D[t]?"Yes":"No"),children:(0,a.jsx)("span",{className:"profile-toggle-label",children:D[t]?"Yes":"No"})})]},t)})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section",children:[(0,a.jsx)("h2",{style:{margin:"0 0 1rem",fontSize:"1.15rem"},children:"Waivers & contracts"}),(0,a.jsx)("p",{style:{margin:"0 0 1rem",fontSize:"0.9rem",color:"var(--text-muted)"},children:"Each waiver shows whether it is signed or unsigned. Sign any that are required."}),0===A.length?(0,a.jsx)("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-muted)"},children:"No waivers on file."}):A.map(e=>{var t;return(0,a.jsx)(o,{waiver:e,signedAt:null!==(t=P[e.id])&&void 0!==t?t:null,memberName:O,onSign:L},e.id)})]}),(0,a.jsxs)("section",{className:"card card-elevated profile-section profile-account-actions",children:[(0,a.jsx)("h2",{style:{margin:"0 0 1rem",fontSize:"1.15rem"},children:"Account actions"}),(0,a.jsxs)("div",{className:"profile-account-buttons",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary profile-account-btn",children:"↻ Reset password"}),(0,a.jsx)("button",{type:"button",className:"btn profile-account-btn profile-account-btn--danger",children:"\uD83D\uDDD1 Delete user"}),(0,a.jsx)("button",{type:"button",className:"btn btn-primary profile-account-btn profile-logout-btn",onClick:()=>(0,s.signOut)({callbackUrl:"/"}),children:"Log out"})]})]}),d&&(0,a.jsx)("p",{style:{marginTop:"1.5rem"},children:(0,a.jsx)(i.default,{href:"/admin",className:"btn btn-secondary",children:"Admin dashboard"})})]})}},443:function(e,t,r){"use strict";r.d(t,{Y:function(){return i}});var a=r(7437);let s=["Credits are used to book events and sessions (camps, clinics, training slots).","Your membership may include a set number of credits per billing period.","When you book an event that uses credits, the cost is deducted from your balance.","You can see your balance in your profile and when booking."];function i(e){let{balance:t,compact:r=!1,className:i=""}=e;return(0,a.jsxs)("section",{className:"credits-explainer ".concat(r?"credits-explainer--compact":""," ").concat(i).trim(),"aria-labelledby":"credits-heading",children:[(0,a.jsx)("h2",{id:"credits-heading",className:"credits-explainer-heading",children:null!=t?"Your credits":"How credits work"}),null!=t&&(0,a.jsxs)("div",{className:"credits-balance",children:[(0,a.jsx)("span",{className:"credits-balance-value",children:t}),(0,a.jsx)("span",{className:"credits-balance-label",children:"credits available"})]}),(0,a.jsx)("ul",{className:"credits-explainer-list",children:s.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})}},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(2972),s=r.n(a)}},function(e){e.O(0,[972,605,971,117,744],function(){return e(e.s=3277)}),_N_E=e.O()}]);