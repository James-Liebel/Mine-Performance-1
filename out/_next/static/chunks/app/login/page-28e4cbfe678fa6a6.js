(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6675:function(e,t,a){Promise.resolve().then(a.bind(a,6374))},6374:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(7437),l=a(2265),o=a(605),i=a(9376),s=a(7648),r=a(5850);function c(){var e;let[t,a]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[p,h]=(0,l.useState)(!1),f=null!==(e=(0,i.useSearchParams)().get("callbackUrl"))&&void 0!==e?e:"/profile";async function b(e){e.preventDefault(),m(""),h(!0);let a=await (0,o.signIn)("credentials",{email:t,password:c,redirect:!1,callbackUrl:f});if(h(!1),null==a?void 0:a.error){m("Invalid email or password.");return}(null==a?void 0:a.url)&&(window.location.href=a.url)}return(0,n.jsxs)("div",{className:"container",style:{paddingTop:"2rem",paddingBottom:"3rem",maxWidth:"400px"},children:[(0,n.jsx)("h1",{children:(0,n.jsx)(r.EditableContent,{contentKey:"login_heading",fallback:"Login",as:"span"})}),(0,n.jsx)("p",{className:"text-muted",style:{marginBottom:"1.5rem"},children:(0,n.jsx)(r.EditableContent,{contentKey:"login_sub",fallback:"Sign in to your account to access your profile.",as:"span"})}),(0,n.jsxs)("form",{onSubmit:b,className:"card card-elevated",style:{padding:"1.5rem"},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"login-email",children:"Email"}),(0,n.jsx)("input",{id:"login-email",type:"email",value:t,onChange:e=>a(e.target.value),required:!0,className:"form-input",style:{width:"100%"}})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"form-label",htmlFor:"login-password",children:"Password"}),(0,n.jsx)("input",{id:"login-password",type:"password",value:c,onChange:e=>d(e.target.value),required:!0,className:"form-input",style:{width:"100%"}})]}),u&&(0,n.jsx)("p",{style:{color:"var(--accent)",marginBottom:"1rem",fontSize:"0.9rem"},children:u}),(0,n.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:p,style:{width:"100%"},children:p?"Signing in…":"Sign in"})]}),(0,n.jsxs)("p",{style:{marginTop:"1.5rem",fontSize:"0.95rem",color:"var(--text-muted)"},children:[(0,n.jsx)(r.EditableContent,{contentKey:"login_no_account_before",fallback:"Don't have an account? ",as:"span"}),(0,n.jsx)(s.default,{href:"/contact",children:(0,n.jsx)(r.EditableContent,{contentKey:"login_no_account_link",fallback:"Contact us",as:"span"})}),(0,n.jsx)(r.EditableContent,{contentKey:"login_no_account_after",fallback:" to get started.",as:"span"})]}),(0,n.jsxs)("p",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"var(--text-muted)",padding:"0.75rem",background:"var(--bg-subtle)",borderRadius:"var(--radius)"},children:[(0,n.jsx)("strong",{children:"Demo:"})," Admin — admin@mineperformance.com / admin. Member — member@mineperformance.com / member."]}),(0,n.jsx)("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:(0,n.jsx)(s.default,{href:"/",children:"Back to home"})})]})}function d(){return(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)("div",{className:"container",style:{paddingTop:"3rem"},children:(0,n.jsx)("p",{children:"Loading…"})}),children:(0,n.jsx)(c,{})})}},5850:function(e,t,a){"use strict";a.r(t),a.d(t,{EditableContent:function(){return i}});var n=a(7437),l=a(2265),o=a(7444);function i(e){var t;let{contentKey:a,fallback:i="",displayValue:s,as:r="span",className:c,style:d}=e,{content:u,setContentKey:m,editMode:p,isAdmin:h}=(0,o.e)(),[f,b]=(0,l.useState)(!1),[y,v]=(0,l.useState)(""),g=null!==(t=u[a])&&void 0!==t?t:i,x=void 0!==s?s:g,j=p&&h,w=e=>{j&&(e&&(e.preventDefault(),e.stopPropagation()),v(g),b(!0))},C=async()=>{try{await m(a,y),setTimeout(()=>b(!1),0)}catch(e){}};return(0,n.jsxs)(n.Fragment,{children:[j?(0,n.jsx)(r,{role:"button",tabIndex:0,className:c?"".concat(c," editable-content editable-content--on"):"editable-content editable-content--on",style:d,onClick:e=>w(e),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),w())},title:"Click to edit",children:x}):(0,n.jsx)(r,{className:c,style:d,children:x}),f&&(0,n.jsx)("div",{className:"editable-content-modal-backdrop",role:"dialog","aria-modal":"true","aria-label":"Edit content",onClick:e=>{e.preventDefault(),e.stopPropagation(),e.target===e.currentTarget&&setTimeout(()=>b(!1),0)},children:(0,n.jsxs)("div",{className:"editable-content-modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("label",{htmlFor:"editable-content-input",className:"editable-content-modal-label",children:["Edit: ",a]}),(0,n.jsx)("textarea",{id:"editable-content-input",className:"form-input editable-content-modal-input",value:y,onChange:e=>v(e.target.value),rows:4,autoFocus:!0}),(0,n.jsxs)("div",{className:"editable-content-modal-actions",children:[(0,n.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),C()},children:"Save"}),(0,n.jsx)("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),setTimeout(()=>b(!1),0)},children:"Cancel"})]})]})})]})}},7444:function(e,t,a){"use strict";a.d(t,{_:function(){return p},e:function(){return d}});var n=a(7437),l=a(2265),o=a(605);let i=["oswald","playfair"],s=["barlow","inter"];function r(e){let{themeDisplayFont:t,themeBodyFont:a}=e;return(0,l.useEffect)(()=>{var e,n;let l=(e=t||"",i.includes(e))?t:"oswald",o=(n=a||"",s.includes(n))?a:"barlow",r=document.documentElement;r.style.setProperty("--font-display-var","var(--font-display-".concat(l,")")),r.style.setProperty("--font-sans-var","var(--font-sans-".concat(o,")"))},[t,a]),null}let c=(0,l.createContext)(null);function d(){let e=(0,l.useContext)(c);if(!e)throw Error("useSiteContent must be used within SiteContentProvider");return e}let u=[{value:"oswald",label:"Oswald (sports / headlines)"},{value:"playfair",label:"Playfair Display (classic serif)"}],m=[{value:"barlow",label:"Barlow (clean geometric)"},{value:"inter",label:"Inter (neutral sans)"}];function p(e){var t,a,i;let{children:s}=e,{data:d,status:p}=(0,o.useSession)(),[h,f]=(0,l.useState)({}),[b,y]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),x=(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.role)==="admin",j=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/site-content"),t=await e.json().catch(()=>({}));e.ok&&"object"==typeof t&&null!==t&&f(t)}catch(e){}},[]);(0,l.useEffect)(()=>{j()},[j]),(0,l.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"e"===e.key&&(e.preventDefault(),x&&y(e=>!e))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x]);let w=(0,l.useCallback)(async(e,t)=>{try{let a=await fetch("/api/admin/site-content",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,value:t})}),n=await a.json().catch(()=>({}));if(!a.ok)throw Error(n.error||"Failed to update");"object"==typeof n&&null!==n&&f(n)}catch(e){throw e}},[]);return(0,n.jsxs)(c.Provider,{value:{content:h,setContentKey:w,editMode:b,setEditMode:y,isAdmin:x,refresh:j},children:[(0,n.jsx)(r,{themeDisplayFont:h.theme_display_font,themeBodyFont:h.theme_body_font}),s,"authenticated"===p&&x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"edit-site-fab-group",children:[b&&(0,n.jsx)("button",{type:"button",className:"edit-site-fab edit-site-fab--theme",onClick:()=>g(!0),title:"Edit theme & fonts","aria-label":"Edit theme and fonts",children:"Theme"}),(0,n.jsx)("button",{type:"button",className:"edit-site-fab",onClick:()=>y(e=>!e),title:b?"Exit edit mode (Ctrl+E)":"Edit site (Ctrl+E)","aria-label":b?"Exit edit mode":"Edit site",children:b?"Done":"Edit site"})]}),v&&(0,n.jsx)("div",{className:"editable-content-modal-backdrop",role:"dialog","aria-modal":"true","aria-label":"Theme & fonts",onClick:e=>e.target===e.currentTarget&&g(!1),children:(0,n.jsxs)("div",{className:"editable-content-modal theme-editor-modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1.25rem"},children:"Theme & fonts"}),(0,n.jsx)("p",{className:"text-muted",style:{fontSize:"0.9rem",marginBottom:"1.25rem"},children:"Change display (headings) and body fonts. Changes apply across the site."}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsxs)("label",{className:"editable-content-modal-label",children:["Display font (headings)",(0,n.jsx)("select",{className:"form-input",style:{marginTop:"0.35rem",width:"100%"},value:null!==(a=h.theme_display_font)&&void 0!==a?a:"oswald",onChange:e=>w("theme_display_font",e.target.value),children:u.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("label",{className:"editable-content-modal-label",children:["Body font",(0,n.jsx)("select",{className:"form-input",style:{marginTop:"0.35rem",width:"100%"},value:null!==(i=h.theme_body_font)&&void 0!==i?i:"barlow",onChange:e=>w("theme_body_font",e.target.value),children:m.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsx)("div",{className:"editable-content-modal-actions",style:{marginTop:"1.5rem"},children:(0,n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>g(!1),children:"Close"})})]})})]})]})}},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var n=a(2972),l=a.n(n)},9376:function(e,t,a){"use strict";var n=a(5475);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[972,605,971,117,744],function(){return e(e.s=6675)}),_N_E=e.O()}]);